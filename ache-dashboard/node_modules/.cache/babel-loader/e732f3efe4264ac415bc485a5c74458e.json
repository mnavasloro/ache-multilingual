{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar PropTypes = require(\"prop-types\");\n\nvar core_1 = require(\"../../../../../core\");\n\nvar ui_1 = require(\"../../../../ui\");\n\nvar defaults = require('lodash/defaults');\n\nvar map = require('lodash/map');\n\nvar identity = require('lodash/identity');\n\nvar HierarchicalMenuFilter =\n/** @class */\nfunction (_super) {\n  __extends(HierarchicalMenuFilter, _super);\n\n  function HierarchicalMenuFilter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  HierarchicalMenuFilter.prototype.defineBEMBlocks = function () {\n    var blockClass = this.props.mod || 'sk-hierarchical-menu';\n    return {\n      container: blockClass + \"-list\",\n      option: blockClass + \"-option\"\n    };\n  };\n\n  HierarchicalMenuFilter.prototype.defineAccessor = function () {\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        fields = _a.fields,\n        size = _a.size,\n        orderKey = _a.orderKey,\n        orderDirection = _a.orderDirection;\n    return new core_1.HierarchicalFacetAccessor(id, {\n      id: id,\n      title: title,\n      fields: fields,\n      size: size,\n      orderKey: orderKey,\n      orderDirection: orderDirection\n    });\n  };\n\n  HierarchicalMenuFilter.prototype.addFilter = function (option, level) {\n    this.accessor.state = this.accessor.state.toggleLevel(level, option.key);\n    this.searchkit.performSearch();\n  };\n\n  HierarchicalMenuFilter.prototype.renderOption = function (level, option) {\n    var _this = this;\n\n    var _a = this.props,\n        countFormatter = _a.countFormatter,\n        itemComponent = _a.itemComponent;\n    var active = this.accessor.state.contains(level, option.key);\n    return React.createElement(\"div\", {\n      key: option.key\n    }, core_1.renderComponent(itemComponent, {\n      active: active,\n      itemKey: option.key,\n      showCount: true,\n      bemBlocks: this.bemBlocks,\n      onClick: this.addFilter.bind(this, option, level),\n      label: this.translate(option.key),\n      count: countFormatter(option.doc_count)\n    }), function () {\n      if (_this.accessor.resultsState.contains(level, option.key)) {\n        return _this.renderOptions(level + 1);\n      }\n    }());\n  };\n\n  HierarchicalMenuFilter.prototype.renderOptions = function (level) {\n    var block = this.bemBlocks.container;\n    return React.createElement(\"div\", {\n      className: block('hierarchical-options')\n    }, map(this.accessor.getBuckets(level), this.renderOption.bind(this, level)));\n  };\n\n  HierarchicalMenuFilter.prototype.render = function () {\n    if (!this.accessor) return null;\n    var block = this.bemBlocks.container;\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        containerComponent = _a.containerComponent;\n    return core_1.renderComponent(containerComponent, {\n      title: title,\n      className: id ? \"filter--\" + id : undefined,\n      disabled: this.accessor.getBuckets(0).length == 0\n    }, React.createElement(\"div\", {\n      className: block('root')\n    }, this.renderOptions(0)));\n  };\n\n  HierarchicalMenuFilter.defaultProps = {\n    countFormatter: identity,\n    size: 20,\n    containerComponent: ui_1.Panel,\n    itemComponent: ui_1.ItemComponent\n  };\n  HierarchicalMenuFilter.propTypes = defaults({\n    id: PropTypes.string.isRequired,\n    fields: PropTypes.arrayOf(PropTypes.string).isRequired,\n    title: PropTypes.string.isRequired,\n    orderKey: PropTypes.string,\n    orderDirection: PropTypes.oneOf(['asc', 'desc']),\n    countFormatter: PropTypes.func,\n    containerComponent: core_1.RenderComponentPropType,\n    itemComponent: core_1.RenderComponentPropType\n  }, core_1.SearchkitComponent.propTypes);\n  return HierarchicalMenuFilter;\n}(core_1.SearchkitComponent);\n\nexports.HierarchicalMenuFilter = HierarchicalMenuFilter;","map":{"version":3,"mappings":"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","names":["defaults","require","map","identity","__extends","HierarchicalMenuFilter","blockClass","props","mod","container","option","id","title","fields","size","orderKey","orderDirection","core_1","level","accessor","state","toggleLevel","key","searchkit","performSearch","countFormatter","itemComponent","active","contains","React","itemKey","showCount","bemBlocks","onClick","addFilter","bind","label","translate","count","doc_count","_this","resultsState","renderOptions","block","className","getBuckets","renderOption","containerComponent","undefined","disabled","length","ui_1","PropTypes","string","isRequired","arrayOf","oneOf","func","propTypes","exports"],"sources":["C:\\Users\\mnavas\\CODE\\SmartBIC\\ache-multilingual\\ache-dashboard\\node_modules\\searchkit\\src\\components\\search\\filters\\hierarchical-menu-filter\\src\\HierarchicalMenuFilter.tsx"],"sourcesContent":["import * as React from 'react'\nimport * as PropTypes from 'prop-types'\n\nimport {\n  SearchkitComponent,\n  HierarchicalFacetAccessor,\n  SearchkitComponentProps,\n  renderComponent,\n  RenderComponentType,\n  RenderComponentPropType\n} from '../../../../../core'\n\nimport { Panel, ItemComponent, ItemProps } from '../../../../ui'\n\nconst defaults = require('lodash/defaults')\nconst map = require('lodash/map')\nconst identity = require('lodash/identity')\n\nexport interface HierarchicalMenuFilterProps extends SearchkitComponentProps {\n  id: string\n  fields: Array<string>\n  title: string\n  size?: number\n  orderKey?: string\n  orderDirection?: string\n  countFormatter?: (count: number) => string | number\n  containerComponent?: RenderComponentType<any>\n  itemComponent?: RenderComponentType<ItemProps>\n}\n\nexport class HierarchicalMenuFilter extends SearchkitComponent<HierarchicalMenuFilterProps, any> {\n  public accessor: HierarchicalFacetAccessor\n\n  static defaultProps = {\n    countFormatter: identity,\n    size: 20,\n    containerComponent: Panel,\n    itemComponent: ItemComponent\n  }\n  static propTypes = defaults(\n    {\n      id: PropTypes.string.isRequired,\n      fields: PropTypes.arrayOf(PropTypes.string).isRequired,\n      title: PropTypes.string.isRequired,\n      orderKey: PropTypes.string,\n      orderDirection: PropTypes.oneOf(['asc', 'desc']),\n      countFormatter: PropTypes.func,\n      containerComponent: RenderComponentPropType,\n      itemComponent: RenderComponentPropType\n    },\n    SearchkitComponent.propTypes\n  )\n\n  defineBEMBlocks() {\n    const blockClass = this.props.mod || 'sk-hierarchical-menu'\n    return {\n      container: `${blockClass}-list`,\n      option: `${blockClass}-option`\n    }\n  }\n\n  defineAccessor() {\n    const { id, title, fields, size, orderKey, orderDirection } = this.props\n    return new HierarchicalFacetAccessor(id, {\n      id,\n      title,\n      fields,\n      size,\n      orderKey,\n      orderDirection\n    })\n  }\n\n  addFilter(option, level) {\n    this.accessor.state = this.accessor.state.toggleLevel(level, option.key)\n\n    this.searchkit.performSearch()\n  }\n\n  renderOption(level, option) {\n    const { countFormatter, itemComponent } = this.props\n    const active = this.accessor.state.contains(level, option.key)\n\n    return (\n      <div key={option.key}>\n        {renderComponent(itemComponent, {\n          active,\n          itemKey: option.key,\n          showCount: true,\n          bemBlocks: this.bemBlocks,\n          onClick: this.addFilter.bind(this, option, level),\n          label: this.translate(option.key),\n          count: countFormatter(option.doc_count)\n        })}\n        {(() => {\n          if (this.accessor.resultsState.contains(level, option.key)) {\n            return this.renderOptions(level + 1)\n          }\n        })()}\n      </div>\n    )\n  }\n\n  renderOptions(level) {\n    const block = this.bemBlocks.container\n    return (\n      <div className={block('hierarchical-options')}>\n        {map(this.accessor.getBuckets(level), this.renderOption.bind(this, level))}\n      </div>\n    )\n  }\n\n  render() {\n    if (!this.accessor) return null\n    const block = this.bemBlocks.container\n    const { id, title, containerComponent } = this.props\n    return renderComponent(\n      containerComponent,\n      {\n        title,\n        className: id ? `filter--${id}` : undefined,\n        disabled: this.accessor.getBuckets(0).length == 0\n      },\n      <div className={block('root')}>{this.renderOptions(0)}</div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"script"}