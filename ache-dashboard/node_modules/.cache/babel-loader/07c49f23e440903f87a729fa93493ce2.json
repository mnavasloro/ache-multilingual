{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PropTypes = require(\"prop-types\");\n\nvar core_1 = require(\"../../../../core\");\n\nvar ui_1 = require(\"../../../ui\");\n\nvar defaults = require('lodash/defaults');\n\nvar get = require('lodash/get');\n\nvar identity = require('lodash/identity');\n\nvar DynamicRangeFilter =\n/** @class */\nfunction (_super) {\n  __extends(DynamicRangeFilter, _super);\n\n  function DynamicRangeFilter(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.sliderUpdate = _this.sliderUpdate.bind(_this);\n    _this.sliderUpdateAndSearch = _this.sliderUpdateAndSearch.bind(_this);\n    return _this;\n  }\n\n  DynamicRangeFilter.prototype.defineAccessor = function () {\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        field = _a.field,\n        fieldOptions = _a.fieldOptions,\n        rangeFormatter = _a.rangeFormatter,\n        translations = _a.translations;\n    return new core_1.DynamicRangeAccessor(id, {\n      id: id,\n      title: title,\n      field: field,\n      fieldOptions: fieldOptions,\n      rangeFormatter: rangeFormatter,\n      translations: translations\n    });\n  };\n\n  DynamicRangeFilter.prototype.defineBEMBlocks = function () {\n    var block = this.props.mod || 'sk-dynamic-range-filter';\n    return {\n      container: block,\n      labels: block + '-value-labels'\n    };\n  };\n\n  DynamicRangeFilter.prototype.getMinMax = function () {\n    return {\n      min: this.accessor.getStat('min') || 0,\n      max: this.accessor.getStat('max') || 0\n    };\n  };\n\n  DynamicRangeFilter.prototype.sliderUpdate = function (newValues) {\n    var _a = this.getMinMax(),\n        min = _a.min,\n        max = _a.max;\n\n    if (newValues.min == min && newValues.max == max) {\n      this.accessor.state = this.accessor.state.clear();\n    } else {\n      this.accessor.state = this.accessor.state.setValue(newValues);\n    }\n\n    this.forceUpdate();\n  };\n\n  DynamicRangeFilter.prototype.sliderUpdateAndSearch = function (newValues) {\n    this.sliderUpdate(newValues);\n    this.searchkit.performSearch();\n  };\n\n  DynamicRangeFilter.prototype.render = function () {\n    if (!this.accessor) return null;\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        containerComponent = _a.containerComponent;\n    return core_1.renderComponent(containerComponent, {\n      title: title,\n      className: id ? \"filter--\" + id : undefined,\n      disabled: this.accessor.isDisabled()\n    }, this.renderRangeComponent(this.props.rangeComponent));\n  };\n\n  DynamicRangeFilter.prototype.renderRangeComponent = function (component) {\n    var _a = this.getMinMax(),\n        min = _a.min,\n        max = _a.max;\n\n    var rangeFormatter = this.props.rangeFormatter;\n    var state = this.accessor.state.getValue();\n    return core_1.renderComponent(component, {\n      min: min,\n      max: max,\n      minValue: Number(get(state, 'min', min)),\n      maxValue: Number(get(state, 'max', max)),\n      rangeFormatter: rangeFormatter,\n      onChange: this.sliderUpdate,\n      onFinished: this.sliderUpdateAndSearch\n    });\n  };\n\n  DynamicRangeFilter.propTypes = defaults({\n    field: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n    containerComponent: core_1.RenderComponentPropType,\n    rangeComponent: core_1.RenderComponentPropType,\n    rangeFormatter: PropTypes.func,\n    fieldOptions: PropTypes.shape({\n      type: PropTypes.oneOf(['embedded', 'nested', 'children']).isRequired,\n      options: PropTypes.object\n    })\n  }, core_1.SearchkitComponent.propTypes);\n  DynamicRangeFilter.defaultProps = {\n    containerComponent: ui_1.Panel,\n    rangeComponent: ui_1.RangeSlider,\n    rangeFormatter: identity\n  };\n  return DynamicRangeFilter;\n}(core_1.SearchkitComponent);\n\nexports.DynamicRangeFilter = DynamicRangeFilter;","map":{"version":3,"mappings":"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","names":["defaults","require","get","identity","__extends","props","_super","_this","sliderUpdate","bind","sliderUpdateAndSearch","DynamicRangeFilter","id","title","field","fieldOptions","rangeFormatter","translations","core_1","block","mod","container","labels","min","accessor","getStat","max","newValues","state","clear","setValue","forceUpdate","searchkit","performSearch","containerComponent","className","undefined","disabled","isDisabled","renderRangeComponent","rangeComponent","component","getValue","minValue","Number","maxValue","onChange","onFinished","PropTypes","string","isRequired","func","shape","type","oneOf","options","object","propTypes","ui_1","exports"],"sources":["C:\\Users\\mnavas\\CODE\\SmartBIC\\ache-multilingual\\ache-dashboard\\node_modules\\searchkit\\src\\components\\search\\filters\\dynamic-range-filter\\DynamicRangeFilter.tsx"],"sourcesContent":["import * as PropTypes from 'prop-types'\n\nimport {\n  SearchkitComponent,\n  SearchkitComponentProps,\n  RenderComponentType,\n  RenderComponentPropType,\n  renderComponent,\n  DynamicRangeAccessor,\n  FieldOptions\n} from '../../../../core'\n\nimport { RangeProps, Panel, RangeSlider } from '../../../ui'\n\nconst defaults = require('lodash/defaults')\nconst get = require('lodash/get')\nconst identity = require('lodash/identity')\n\nexport interface DynamicRangeFilterProps extends SearchkitComponentProps {\n  field: string\n  id: string\n  title: string\n  containerComponent?: RenderComponentType<any>\n  rangeComponent?: RenderComponentType<RangeProps>\n  rangeFormatter?: (count: number) => number | string\n  fieldOptions?: FieldOptions\n}\n\nexport class DynamicRangeFilter extends SearchkitComponent<DynamicRangeFilterProps, any> {\n  accessor: DynamicRangeAccessor\n\n  static propTypes = defaults(\n    {\n      field: PropTypes.string.isRequired,\n      title: PropTypes.string.isRequired,\n      id: PropTypes.string.isRequired,\n      containerComponent: RenderComponentPropType,\n      rangeComponent: RenderComponentPropType,\n      rangeFormatter: PropTypes.func,\n      fieldOptions: PropTypes.shape({\n        type: PropTypes.oneOf(['embedded', 'nested', 'children']).isRequired,\n        options: PropTypes.object\n      })\n    },\n    SearchkitComponent.propTypes\n  )\n\n  static defaultProps = {\n    containerComponent: Panel,\n    rangeComponent: RangeSlider,\n    rangeFormatter: identity\n  }\n\n  constructor(props) {\n    super(props)\n    this.sliderUpdate = this.sliderUpdate.bind(this)\n    this.sliderUpdateAndSearch = this.sliderUpdateAndSearch.bind(this)\n  }\n\n  defineAccessor() {\n    const { id, title, field, fieldOptions, rangeFormatter, translations } = this.props\n    return new DynamicRangeAccessor(id, {\n      id,\n      title,\n      field,\n      fieldOptions,\n      rangeFormatter,\n      translations\n    })\n  }\n\n  defineBEMBlocks() {\n    const block = this.props.mod || 'sk-dynamic-range-filter'\n    return {\n      container: block,\n      labels: block + '-value-labels'\n    }\n  }\n\n  getMinMax() {\n    return {\n      min: this.accessor.getStat('min') || 0,\n      max: this.accessor.getStat('max') || 0\n    }\n  }\n\n  sliderUpdate(newValues) {\n    const { min, max } = this.getMinMax()\n\n    if (newValues.min == min && newValues.max == max) {\n      this.accessor.state = this.accessor.state.clear()\n    } else {\n      this.accessor.state = this.accessor.state.setValue(newValues)\n    }\n\n    this.forceUpdate()\n  }\n\n  sliderUpdateAndSearch(newValues) {\n    this.sliderUpdate(newValues)\n    this.searchkit.performSearch()\n  }\n\n  render(): React.ReactElement<any> {\n    if (!this.accessor) return null\n    const { id, title, containerComponent } = this.props\n\n    return renderComponent(\n      containerComponent,\n      {\n        title,\n        className: id ? `filter--${id}` : undefined,\n        disabled: this.accessor.isDisabled()\n      },\n      this.renderRangeComponent(this.props.rangeComponent)\n    )\n  }\n\n  renderRangeComponent(component: RenderComponentType<any>): React.ReactElement<any> {\n    const { min, max } = this.getMinMax()\n    const { rangeFormatter } = this.props\n    const state = this.accessor.state.getValue()\n    return renderComponent(component, {\n      min,\n      max,\n      minValue: Number(get(state, 'min', min)),\n      maxValue: Number(get(state, 'max', max)),\n      rangeFormatter,\n      onChange: this.sliderUpdate,\n      onFinished: this.sliderUpdateAndSearch\n    })\n  }\n}\n"]},"metadata":{},"sourceType":"script"}