{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PropTypes = require(\"prop-types\");\n\nvar core_1 = require(\"../../../../../core\");\n\nvar ui_1 = require(\"../../../../ui\");\n\nvar defaults = require('lodash/defaults');\n\nvar get = require('lodash/get');\n\nvar RangeFilter =\n/** @class */\nfunction (_super) {\n  __extends(RangeFilter, _super);\n\n  function RangeFilter(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.sliderUpdate = _this.sliderUpdate.bind(_this);\n    _this.sliderUpdateAndSearch = _this.sliderUpdateAndSearch.bind(_this);\n    return _this;\n  }\n\n  RangeFilter.prototype.defineAccessor = function () {\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        min = _a.min,\n        max = _a.max,\n        field = _a.field,\n        fieldOptions = _a.fieldOptions,\n        interval = _a.interval,\n        showHistogram = _a.showHistogram,\n        rangeFormatter = _a.rangeFormatter,\n        translations = _a.translations;\n    return new core_1.RangeAccessor(id, {\n      id: id,\n      min: min,\n      max: max,\n      title: title,\n      field: field,\n      rangeFormatter: rangeFormatter,\n      translations: translations,\n      interval: interval,\n      loadHistogram: showHistogram,\n      fieldOptions: fieldOptions\n    });\n  };\n\n  RangeFilter.prototype.defineBEMBlocks = function () {\n    var block = this.props.mod || 'sk-range-filter';\n    return {\n      container: block,\n      labels: block + '-value-labels'\n    };\n  };\n\n  RangeFilter.prototype.sliderUpdate = function (newValues) {\n    if (newValues.min == this.props.min && newValues.max == this.props.max) {\n      this.accessor.state = this.accessor.state.clear();\n    } else {\n      this.accessor.state = this.accessor.state.setValue(newValues);\n    }\n\n    this.forceUpdate();\n  };\n\n  RangeFilter.prototype.sliderUpdateAndSearch = function (newValues) {\n    this.sliderUpdate(newValues);\n    this.searchkit.performSearch();\n  };\n\n  RangeFilter.prototype.getRangeComponent = function () {\n    var _a = this.props,\n        rangeComponent = _a.rangeComponent,\n        showHistogram = _a.showHistogram;\n\n    if (!showHistogram && rangeComponent === ui_1.RangeSliderHistogram) {\n      return ui_1.RangeSlider;\n    }\n\n    return rangeComponent;\n  };\n\n  RangeFilter.prototype.render = function () {\n    if (!this.accessor) return null;\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        containerComponent = _a.containerComponent;\n    return core_1.renderComponent(containerComponent, {\n      title: title,\n      className: id ? \"filter--\" + id : undefined,\n      disabled: this.accessor.isDisabled()\n    }, this.renderRangeComponent(this.getRangeComponent()));\n  };\n\n  RangeFilter.prototype.renderRangeComponent = function (component) {\n    var _a = this.props,\n        min = _a.min,\n        max = _a.max,\n        rangeFormatter = _a.rangeFormatter,\n        marks = _a.marks;\n    var state = this.accessor.state.getValue();\n    return core_1.renderComponent(component, {\n      min: min,\n      max: max,\n      minValue: Number(get(state, 'min', min)),\n      maxValue: Number(get(state, 'max', max)),\n      items: this.accessor.getBuckets(),\n      onChange: this.sliderUpdate,\n      onFinished: this.sliderUpdateAndSearch,\n      rangeFormatter: rangeFormatter,\n      marks: marks\n    });\n  };\n\n  RangeFilter.propTypes = defaults({\n    field: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n    containerComponent: core_1.RenderComponentPropType,\n    rangeComponent: core_1.RenderComponentPropType,\n    fieldOptions: PropTypes.shape({\n      type: PropTypes.oneOf(['embedded', 'nested', 'children']).isRequired,\n      options: PropTypes.object\n    }),\n    rangeFormatter: PropTypes.func,\n    marks: PropTypes.object\n  }, core_1.SearchkitComponent.propTypes);\n  RangeFilter.defaultProps = {\n    containerComponent: ui_1.Panel,\n    rangeComponent: ui_1.RangeSliderHistogram,\n    showHistogram: true\n  };\n  return RangeFilter;\n}(core_1.SearchkitComponent);\n\nexports.RangeFilter = RangeFilter;","map":{"version":3,"mappings":"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","names":["defaults","require","get","__extends","props","_super","_this","sliderUpdate","bind","sliderUpdateAndSearch","RangeFilter","id","title","min","max","field","fieldOptions","interval","showHistogram","rangeFormatter","translations","core_1","loadHistogram","block","mod","container","labels","newValues","accessor","state","clear","setValue","forceUpdate","searchkit","performSearch","rangeComponent","ui_1","containerComponent","className","undefined","disabled","isDisabled","renderRangeComponent","getRangeComponent","component","marks","getValue","minValue","Number","maxValue","items","getBuckets","onChange","onFinished","PropTypes","string","isRequired","shape","type","oneOf","options","object","func","propTypes","exports"],"sources":["C:\\Users\\mnavas\\CODE\\SmartBIC\\ache-multilingual\\ache-dashboard\\node_modules\\searchkit\\src\\components\\search\\filters\\range-filter\\src\\RangeFilter.tsx"],"sourcesContent":["import * as PropTypes from 'prop-types'\n\nimport {\n  SearchkitComponent,\n  SearchkitComponentProps,\n  RangeAccessor,\n  RenderComponentType,\n  RenderComponentPropType,\n  renderComponent,\n  FieldOptions\n} from '../../../../../core'\n\nimport { RangeProps, Panel, RangeSliderHistogram, RangeSlider } from '../../../../ui'\n\nconst defaults = require('lodash/defaults')\nconst get = require('lodash/get')\n\nexport interface RangeFilterProps extends SearchkitComponentProps {\n  field: string\n  min: number\n  max: number\n  id: string\n  title: string\n  interval?: number\n  showHistogram?: boolean\n  containerComponent?: RenderComponentType<any>\n  rangeComponent?: RenderComponentType<RangeProps>\n  rangeFormatter?: (count: number) => number | string\n  marks?: Record<string, any>\n  fieldOptions?: FieldOptions\n}\n\nexport class RangeFilter extends SearchkitComponent<RangeFilterProps, any> {\n  accessor: RangeAccessor\n\n  static propTypes = defaults(\n    {\n      field: PropTypes.string.isRequired,\n      title: PropTypes.string.isRequired,\n      id: PropTypes.string.isRequired,\n      containerComponent: RenderComponentPropType,\n      rangeComponent: RenderComponentPropType,\n      fieldOptions: PropTypes.shape({\n        type: PropTypes.oneOf(['embedded', 'nested', 'children']).isRequired,\n        options: PropTypes.object\n      }),\n      rangeFormatter: PropTypes.func,\n      marks: PropTypes.object\n    },\n    SearchkitComponent.propTypes\n  )\n\n  static defaultProps = {\n    containerComponent: Panel,\n    rangeComponent: RangeSliderHistogram,\n    showHistogram: true\n  }\n\n  constructor(props) {\n    super(props)\n    this.sliderUpdate = this.sliderUpdate.bind(this)\n    this.sliderUpdateAndSearch = this.sliderUpdateAndSearch.bind(this)\n  }\n\n  defineAccessor() {\n    const {\n      id,\n      title,\n      min,\n      max,\n      field,\n      fieldOptions,\n      interval,\n      showHistogram,\n      rangeFormatter,\n      translations\n    } = this.props\n    return new RangeAccessor(id, {\n      id,\n      min,\n      max,\n      title,\n      field,\n      rangeFormatter,\n      translations,\n      interval,\n      loadHistogram: showHistogram,\n      fieldOptions\n    })\n  }\n\n  defineBEMBlocks() {\n    const block = this.props.mod || 'sk-range-filter'\n    return {\n      container: block,\n      labels: block + '-value-labels'\n    }\n  }\n\n  sliderUpdate(newValues) {\n    if (newValues.min == this.props.min && newValues.max == this.props.max) {\n      this.accessor.state = this.accessor.state.clear()\n    } else {\n      this.accessor.state = this.accessor.state.setValue(newValues)\n    }\n    this.forceUpdate()\n  }\n\n  sliderUpdateAndSearch(newValues) {\n    this.sliderUpdate(newValues)\n    this.searchkit.performSearch()\n  }\n\n  getRangeComponent(): RenderComponentType<any> {\n    const { rangeComponent, showHistogram } = this.props\n    if (!showHistogram && rangeComponent === RangeSliderHistogram) {\n      return RangeSlider\n    }\n    return rangeComponent\n  }\n\n  render(): React.ReactElement<any> {\n    if (!this.accessor) return null\n    const { id, title, containerComponent } = this.props\n\n    return renderComponent(\n      containerComponent,\n      {\n        title,\n        className: id ? `filter--${id}` : undefined,\n        disabled: this.accessor.isDisabled()\n      },\n      this.renderRangeComponent(this.getRangeComponent())\n    )\n  }\n\n  renderRangeComponent(component: RenderComponentType<any>): React.ReactElement<any> {\n    const { min, max, rangeFormatter, marks } = this.props\n    const state = this.accessor.state.getValue()\n    return renderComponent(component, {\n      min,\n      max,\n      minValue: Number(get(state, 'min', min)),\n      maxValue: Number(get(state, 'max', max)),\n      items: this.accessor.getBuckets(),\n      onChange: this.sliderUpdate,\n      onFinished: this.sliderUpdateAndSearch,\n      rangeFormatter,\n      marks\n    })\n  }\n}\n"]},"metadata":{},"sourceType":"script"}