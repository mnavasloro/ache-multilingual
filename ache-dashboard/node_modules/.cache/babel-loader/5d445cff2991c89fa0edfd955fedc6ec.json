{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Accessor_1 = require(\"./Accessor\");\n\nvar StatefulAccessor =\n/** @class */\nfunction (_super) {\n  __extends(StatefulAccessor, _super);\n\n  function StatefulAccessor(key, urlString) {\n    var _this = _super.call(this) || this;\n\n    _this.key = key;\n    _this.urlKey = urlString || key && key.replace(/\\./g, '_');\n    _this.urlWithState = _this.urlWithState.bind(_this);\n    return _this;\n  }\n\n  StatefulAccessor.prototype.onStateChange = function () {};\n\n  StatefulAccessor.prototype.fromQueryObject = function (ob) {\n    var value = ob[this.urlKey];\n    this.state = this.state.setValue(value);\n  };\n\n  StatefulAccessor.prototype.getQueryObject = function () {\n    var _a;\n\n    var val = this.state.getValue();\n    return val ? (_a = {}, _a[this.urlKey] = val, _a) : {};\n  };\n\n  StatefulAccessor.prototype.setSearchkitManager = function (searchkit) {\n    _super.prototype.setSearchkitManager.call(this, searchkit);\n\n    this.uuid = this.key + this.uuid;\n    this.fromQueryObject(searchkit.state);\n    searchkit.query = searchkit.buildQuery();\n    this.setResultsState();\n  };\n\n  StatefulAccessor.prototype.setResults = function (results) {\n    _super.prototype.setResults.call(this, results);\n\n    this.setResultsState();\n  };\n\n  StatefulAccessor.prototype.setResultsState = function () {\n    this.resultsState = this.state;\n  };\n\n  StatefulAccessor.prototype.resetState = function () {\n    this.state = this.state.clear();\n  };\n\n  StatefulAccessor.prototype.urlWithState = function (state) {\n    var _a;\n\n    return this.searchkit.buildSearchUrl((_a = {}, _a[this.urlKey] = state, _a));\n  };\n\n  return StatefulAccessor;\n}(Accessor_1.Accessor);\n\nexports.StatefulAccessor = StatefulAccessor;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;AAEA;AAAA;AAAA;EAA4DA;;EAM1D,0BAAYC,GAAZ,EAAiBC,SAAjB,EAA2B;IAA3B,YACEC,qBAAO,IADT;;IAEEC,KAAI,CAACH,GAAL,GAAWA,GAAX;IACAG,KAAI,CAACC,MAAL,GAAcH,SAAS,IAAKD,GAAG,IAAIA,GAAG,CAACK,OAAJ,CAAY,KAAZ,EAAmB,GAAnB,CAAnC;IACAF,KAAI,CAACG,YAAL,GAAoBH,KAAI,CAACG,YAAL,CAAkBC,IAAlB,CAAuBJ,KAAvB,CAApB;;EACD;;EAEDK,wDAAkB,CAAlB;;EAEAA,uDAAgBC,EAAhB,EAAkB;IAChB,IAAMC,KAAK,GAAGD,EAAE,CAAC,KAAKL,MAAN,CAAhB;IACA,KAAKO,KAAL,GAAa,KAAKA,KAAL,CAAWC,QAAX,CAAoBF,KAApB,CAAb;EACD,CAHD;;EAKAF;;;IACE,IAAMK,GAAG,GAAG,KAAKF,KAAL,CAAWG,QAAX,EAAZ;IACA,OAAOD,GAAG,IACPE,SACGA,GAAC,KAAKX,MAAN,IAAeS,GADlB,IADO,IAIN,EAJJ;EAKD,CAPD;;EASAL,2DAAoBQ,SAApB,EAA6B;IAC3Bd,iBAAMe,mBAAN,CAAyBC,IAAzB,CAAyB,IAAzB,EAA0BF,SAA1B;;IACA,KAAKG,IAAL,GAAY,KAAKnB,GAAL,GAAW,KAAKmB,IAA5B;IACA,KAAKC,eAAL,CAAqBJ,SAAS,CAACL,KAA/B;IACAK,SAAS,CAACK,KAAV,GAAkBL,SAAS,CAACM,UAAV,EAAlB;IACA,KAAKC,eAAL;EACD,CAND;;EAQAf,kDAAWgB,OAAX,EAAkB;IAChBtB,iBAAMuB,UAAN,CAAgBP,IAAhB,CAAgB,IAAhB,EAAiBM,OAAjB;;IACA,KAAKD,eAAL;EACD,CAHD;;EAKAf;IACE,KAAKkB,YAAL,GAAoB,KAAKf,KAAzB;EACD,CAFD;;EAIAH;IACE,KAAKG,KAAL,GAAa,KAAKA,KAAL,CAAWgB,KAAX,EAAb;EACD,CAFD;;EAIAnB,oDAAaG,KAAb,EAAqB;;;IACnB,OAAO,KAAKK,SAAL,CAAeY,cAAf,EAA6Bb,SAAGA,GAAC,KAAKX,MAAN,IAAeO,KAAlB,EAAuBI,EAApD,EAAP;EACD,CAFD;;EAGF;AAAC,CArDD,CAA4Dc,mBAA5D;;AAAaC","names":["__extends","key","urlString","_super","_this","urlKey","replace","urlWithState","bind","StatefulAccessor","ob","value","state","setValue","val","getValue","_a","searchkit","setSearchkitManager","call","uuid","fromQueryObject","query","buildQuery","setResultsState","results","setResults","resultsState","clear","buildSearchUrl","Accessor_1","exports"],"sources":["C:\\Users\\mnavas\\CODE\\SmartBIC\\ache-multilingual\\ache-dashboard\\node_modules\\searchkit\\src\\core\\accessors\\StatefulAccessor.ts"],"sourcesContent":["import { State } from '../state'\nimport { Accessor } from './Accessor'\n\nexport class StatefulAccessor<T extends State<any>> extends Accessor {\n  key: string\n  urlKey: string\n  state: T\n  resultsState: T\n\n  constructor(key, urlString?) {\n    super()\n    this.key = key\n    this.urlKey = urlString || (key && key.replace(/\\./g, '_'))\n    this.urlWithState = this.urlWithState.bind(this)\n  }\n\n  onStateChange() {}\n\n  fromQueryObject(ob) {\n    const value = ob[this.urlKey]\n    this.state = this.state.setValue(value)\n  }\n\n  getQueryObject() {\n    const val = this.state.getValue()\n    return val\n      ? {\n          [this.urlKey]: val\n        }\n      : {}\n  }\n\n  setSearchkitManager(searchkit) {\n    super.setSearchkitManager(searchkit)\n    this.uuid = this.key + this.uuid\n    this.fromQueryObject(searchkit.state)\n    searchkit.query = searchkit.buildQuery()\n    this.setResultsState()\n  }\n\n  setResults(results) {\n    super.setResults(results)\n    this.setResultsState()\n  }\n\n  setResultsState() {\n    this.resultsState = this.state\n  }\n\n  resetState() {\n    this.state = this.state.clear()\n  }\n\n  urlWithState(state: T) {\n    return this.searchkit.buildSearchUrl({ [this.urlKey]: state })\n  }\n}\n"]},"metadata":{},"sourceType":"script"}