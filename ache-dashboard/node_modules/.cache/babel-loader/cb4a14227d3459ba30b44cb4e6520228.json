{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar axios_1 = require(\"axios\");\n\nvar ESTransport_1 = require(\"./ESTransport\");\n\nvar defaults = require('lodash/defaults');\n\nvar AxiosESTransport =\n/** @class */\nfunction (_super) {\n  __extends(AxiosESTransport, _super);\n\n  function AxiosESTransport(host, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.host = host;\n    _this.options = defaults(options, {\n      headers: {},\n      searchUrlPath: '/_search',\n      timeout: AxiosESTransport.timeout\n    });\n    var credentials = AxiosESTransport.parseCredentials(_this.options);\n    var config = defaults(credentials, {\n      baseURL: _this.host,\n      timeout: _this.options.timeout,\n      headers: _this.options.headers\n    });\n    _this.axios = axios_1.default.create(config);\n    return _this;\n  }\n\n  AxiosESTransport.prototype.search = function (query) {\n    return this.axios.post(this.options.searchUrlPath, query).then(this.getData);\n  };\n\n  AxiosESTransport.prototype.getData = function (response) {\n    return response.data;\n  };\n\n  AxiosESTransport.parseCredentials = function (options) {\n    var credentials = {};\n\n    if (options.basicAuth !== undefined) {\n      var parsed = options.basicAuth.split(':');\n      var auth = {\n        username: parsed[0],\n        password: parsed[1]\n      };\n      credentials.auth = auth;\n    }\n\n    if (options.withCredentials) {\n      credentials.withCredentials = true;\n    }\n\n    return credentials;\n  };\n\n  AxiosESTransport.timeout = 5000;\n  return AxiosESTransport;\n}(ESTransport_1.ESTransport);\n\nexports.AxiosESTransport = AxiosESTransport;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,iBAAD,CAAxB;;AAUA;AAAA;AAAA;EAAsCC;;EAKpC,0BAAmBC,IAAnB,EAAiCC,OAAjC,EAAiE;IAAhC;MAAAA;IAAgC;;IAAjE,YACEC,qBAAO,IADT;;IAAmBC;IAEjBA,KAAI,CAACF,OAAL,GAAeJ,QAAQ,CAACI,OAAD,EAAU;MAC/BG,OAAO,EAAE,EADsB;MAE/BC,aAAa,EAAE,UAFgB;MAG/BC,OAAO,EAAEC,gBAAgB,CAACD;IAHK,CAAV,CAAvB;IAMA,IAAME,WAAW,GAAGD,gBAAgB,CAACE,gBAAjB,CAAkCN,KAAI,CAACF,OAAvC,CAApB;IACA,IAAMS,MAAM,GAAGb,QAAQ,CAACW,WAAD,EAAc;MACnCG,OAAO,EAAER,KAAI,CAACH,IADqB;MAEnCM,OAAO,EAAEH,KAAI,CAACF,OAAL,CAAaK,OAFa;MAGnCF,OAAO,EAAED,KAAI,CAACF,OAAL,CAAaG;IAHa,CAAd,CAAvB;IAKAD,KAAI,CAACS,KAAL,GAAaC,gBAAMC,MAAN,CAAaJ,MAAb,CAAb;;EACD;;EAEDH,8CAAOQ,KAAP,EAAiC;IAC/B,OAAO,KAAKH,KAAL,CAAWI,IAAX,CAAgB,KAAKf,OAAL,CAAaI,aAA7B,EAA4CU,KAA5C,EAAmDE,IAAnD,CAAwD,KAAKC,OAA7D,CAAP;EACD,CAFD;;EAIAX,+CAAQY,QAAR,EAAgB;IACd,OAAOA,QAAQ,CAACC,IAAhB;EACD,CAFD;;EAIeb,oCAAf,UAAgCN,OAAhC,EAA2D;IACzD,IAAMO,WAAW,GAGb,EAHJ;;IAIA,IAAIP,OAAO,CAACoB,SAAR,KAAsBC,SAA1B,EAAqC;MACnC,IAAMC,MAAM,GAAGtB,OAAO,CAACoB,SAAR,CAAkBG,KAAlB,CAAwB,GAAxB,CAAf;MACA,IAAMC,IAAI,GAAG;QAAEC,QAAQ,EAAEH,MAAM,CAAC,CAAD,CAAlB;QAAuBI,QAAQ,EAAEJ,MAAM,CAAC,CAAD;MAAvC,CAAb;MACAf,WAAW,CAACiB,IAAZ,GAAmBA,IAAnB;IACD;;IACD,IAAIxB,OAAO,CAAC2B,eAAZ,EAA6B;MAC3BpB,WAAW,CAACoB,eAAZ,GAA8B,IAA9B;IACD;;IACD,OAAOpB,WAAP;EACD,CAdc;;EA7BRD,2BAAU,IAAV;EA4CT;AAAC,CA7CD,CAAsCsB,yBAAtC;;AAAaC","names":["defaults","require","__extends","host","options","_super","_this","headers","searchUrlPath","timeout","AxiosESTransport","credentials","parseCredentials","config","baseURL","axios","axios_1","create","query","post","then","getData","response","data","basicAuth","undefined","parsed","split","auth","username","password","withCredentials","ESTransport_1","exports"],"sources":["C:\\Users\\mnavas\\CODE\\SmartBIC\\ache-multilingual\\ache-dashboard\\node_modules\\searchkit\\src\\core\\transport\\AxiosESTransport.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosResponse } from 'axios'\nimport { ESTransport } from './ESTransport'\nconst defaults = require('lodash/defaults')\n\nexport interface ESTransportOptions {\n  headers?: Record<string, any>\n  basicAuth?: string\n  withCredentials?: boolean\n  searchUrlPath?: string\n  timeout?: number\n}\n\nexport class AxiosESTransport extends ESTransport {\n  static timeout = 5000\n  axios: AxiosInstance\n  options: ESTransportOptions\n\n  constructor(public host: string, options: ESTransportOptions = {}) {\n    super()\n    this.options = defaults(options, {\n      headers: {},\n      searchUrlPath: '/_search',\n      timeout: AxiosESTransport.timeout\n    })\n\n    const credentials = AxiosESTransport.parseCredentials(this.options)\n    const config = defaults(credentials, {\n      baseURL: this.host,\n      timeout: this.options.timeout,\n      headers: this.options.headers\n    })\n    this.axios = axios.create(config)\n  }\n\n  search(query: Record<string, any>): Promise<AxiosResponse> {\n    return this.axios.post(this.options.searchUrlPath, query).then(this.getData)\n  }\n\n  getData(response) {\n    return response.data\n  }\n\n  private static parseCredentials(options: ESTransportOptions): any {\n    const credentials: {\n      auth?: any\n      withCredentials?: any\n    } = {}\n    if (options.basicAuth !== undefined) {\n      const parsed = options.basicAuth.split(':')\n      const auth = { username: parsed[0], password: parsed[1] }\n      credentials.auth = auth\n    }\n    if (options.withCredentials) {\n      credentials.withCredentials = true\n    }\n    return credentials\n  }\n}\n"]},"metadata":{},"sourceType":"script"}