{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar PropTypes = require(\"prop-types\");\n\nvar core_1 = require(\"../../../../core\");\n\nvar SearchBox_1 = require(\"../../search-box/SearchBox\");\n\nvar ui_1 = require(\"../../../ui\");\n\nvar defaults = require('lodash/defaults');\n\nvar throttle = require('lodash/throttle');\n\nvar assign = require('lodash/assign');\n\nvar isUndefined = require('lodash/isUndefined');\n\nvar InputFilter =\n/** @class */\nfunction (_super) {\n  __extends(InputFilter, _super);\n\n  function InputFilter(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.translations = SearchBox_1.SearchBox.translations;\n    _this.state = {\n      focused: false,\n      input: undefined\n    };\n    _this.lastSearchMs = 0;\n    _this.onClear = _this.onClear.bind(_this);\n    _this.throttledSearch = throttle(function () {\n      _this.searchQuery(_this.accessor.getQueryString());\n    }, props.searchThrottleTime);\n    return _this;\n  }\n\n  InputFilter.prototype.componentDidMount = function () {\n    _super.prototype.componentDidMount.call(this);\n  };\n\n  InputFilter.prototype.defineBEMBlocks = function () {\n    return {\n      container: this.props.mod\n    };\n  };\n\n  InputFilter.prototype.defineAccessor = function () {\n    var _this = this;\n\n    var _a = this.props,\n        id = _a.id,\n        title = _a.title,\n        prefixQueryFields = _a.prefixQueryFields,\n        queryFields = _a.queryFields,\n        queryBuilder = _a.queryBuilder,\n        queryOptions = _a.queryOptions,\n        prefixQueryOptions = _a.prefixQueryOptions;\n    return new core_1.QueryAccessor(id, {\n      title: title,\n      addToFilters: true,\n      queryFields: queryFields || ['_all'],\n      prefixQueryFields: prefixQueryFields,\n      queryOptions: assign({}, queryOptions),\n      prefixQueryOptions: assign({}, prefixQueryOptions),\n      queryBuilder: queryBuilder,\n      onQueryStateChange: function onQueryStateChange() {\n        if (!_this.unmounted && _this.state.input) {\n          _this.setState({\n            input: undefined\n          });\n        }\n      }\n    });\n  };\n\n  InputFilter.prototype.onSubmit = function (event) {\n    event.preventDefault();\n    this.searchQuery(this.getValue());\n  };\n\n  InputFilter.prototype.searchQuery = function (query) {\n    var shouldResetOtherState = false;\n    this.accessor.setQueryString(query, shouldResetOtherState);\n    var now = +new Date();\n    var newSearch = now - this.lastSearchMs <= 2000;\n    this.lastSearchMs = now;\n    this.searchkit.performSearch(newSearch);\n  };\n\n  InputFilter.prototype.getValue = function () {\n    var input = this.state.input;\n\n    if (isUndefined(input)) {\n      return this.getAccessorValue();\n    }\n\n    return input;\n  };\n\n  InputFilter.prototype.getAccessorValue = function () {\n    return (this.accessor.state.getValue() || '') + '';\n  };\n\n  InputFilter.prototype.onChange = function (e) {\n    var query = e.target.value;\n\n    if (this.props.searchOnChange) {\n      this.accessor.setQueryString(query);\n      this.throttledSearch();\n      this.forceUpdate();\n    } else {\n      this.setState({\n        input: query\n      });\n    }\n  };\n\n  InputFilter.prototype.onClear = function () {\n    this.accessor.state = this.accessor.state.clear();\n    this.searchkit.performSearch();\n    this.setState({\n      input: undefined\n    });\n  };\n\n  InputFilter.prototype.setFocusState = function (focused) {\n    if (!focused) {\n      var input = this.state.input;\n\n      if (this.props.blurAction == 'search' && !isUndefined(input) && input != this.getAccessorValue()) {\n        this.searchQuery(input);\n      }\n\n      this.setState({\n        focused: focused,\n        input: undefined // Flush (should use accessor's state now)\n\n      });\n    } else {\n      this.setState({\n        focused: focused\n      });\n    }\n  };\n\n  InputFilter.prototype.render = function () {\n    if (!this.accessor) return null;\n    var _a = this.props,\n        containerComponent = _a.containerComponent,\n        title = _a.title,\n        id = _a.id;\n    var block = this.bemBlocks.container;\n    var value = this.getValue();\n    return core_1.renderComponent(containerComponent, {\n      title: title,\n      className: id ? \"filter--\" + id : undefined,\n      disabled: this.searchkit.getHitsCount() == 0 && this.getAccessorValue() == ''\n    }, React.createElement(\"div\", {\n      className: block().state({\n        focused: this.state.focused\n      })\n    }, React.createElement(\"form\", {\n      onSubmit: this.onSubmit.bind(this)\n    }, React.createElement(\"div\", {\n      className: block('icon')\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      \"data-qa\": \"input-filter\",\n      className: block('text'),\n      placeholder: this.props.placeholder || this.translate('searchbox.placeholder'),\n      value: value,\n      onFocus: this.setFocusState.bind(this, true),\n      onBlur: this.setFocusState.bind(this, false),\n      ref: \"queryField\",\n      autoFocus: false,\n      onChange: this.onChange.bind(this)\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      value: this.translate('searchbox.button'),\n      className: block('action'),\n      \"data-qa\": \"submit\"\n    }), React.createElement(\"div\", {\n      \"data-qa\": \"remove\",\n      onClick: this.onClear,\n      className: block('remove').state({\n        hidden: value == ''\n      })\n    }))));\n  };\n\n  InputFilter.translations = {\n    'searchbox.placeholder': 'Search',\n    'searchbox.button': 'search'\n  };\n  InputFilter.defaultProps = {\n    containerComponent: ui_1.Panel,\n    collapsable: false,\n    mod: 'sk-input-filter',\n    searchThrottleTime: 200,\n    blurAction: 'search'\n  };\n  InputFilter.propTypes = defaults({\n    id: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    searchOnChange: PropTypes.bool,\n    searchThrottleTime: PropTypes.number,\n    queryBuilder: PropTypes.func,\n    queryFields: PropTypes.arrayOf(PropTypes.string),\n    queryOptions: PropTypes.object,\n    prefixQueryFields: PropTypes.arrayOf(PropTypes.string),\n    prefixQueryOptions: PropTypes.object,\n    translations: core_1.SearchkitComponent.translationsPropType(SearchBox_1.SearchBox.translations),\n    mod: PropTypes.string,\n    placeholder: PropTypes.string,\n    blurAction: PropTypes.string\n  }, core_1.SearchkitComponent.propTypes);\n  return InputFilter;\n}(core_1.SearchkitComponent);\n\nexports.InputFilter = InputFilter;","map":{"version":3,"mappings":"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","names":["defaults","require","throttle","assign","isUndefined","__extends","props","_super","_this","SearchBox_1","translations","state","focused","input","undefined","lastSearchMs","onClear","bind","throttledSearch","searchQuery","accessor","getQueryString","searchThrottleTime","InputFilter","componentDidMount","call","container","mod","id","title","prefixQueryFields","queryFields","queryBuilder","queryOptions","prefixQueryOptions","core_1","addToFilters","onQueryStateChange","unmounted","setState","event","preventDefault","getValue","query","shouldResetOtherState","setQueryString","now","Date","newSearch","searchkit","performSearch","getAccessorValue","e","target","value","searchOnChange","forceUpdate","clear","blurAction","containerComponent","block","bemBlocks","className","disabled","getHitsCount","React","onSubmit","type","placeholder","translate","onFocus","setFocusState","onBlur","ref","autoFocus","onChange","onClick","hidden","ui_1","collapsable","PropTypes","string","isRequired","bool","number","func","arrayOf","object","translationsPropType","propTypes","exports"],"sources":["C:\\Users\\mnavas\\CODE\\SmartBIC\\ache-multilingual\\ache-dashboard\\node_modules\\searchkit\\src\\components\\search\\filters\\input-filter\\InputFilter.tsx"],"sourcesContent":["import * as React from 'react'\nimport * as PropTypes from 'prop-types'\n\nimport {\n  QueryAccessor,\n  SearchkitComponent,\n  SearchkitComponentProps,\n  RenderComponentType,\n  renderComponent\n} from '../../../../core'\n\nimport { SearchBox } from '../../search-box/SearchBox'\n\nimport { Panel } from '../../../ui'\n\nconst defaults = require('lodash/defaults')\nconst throttle = require('lodash/throttle')\nconst assign = require('lodash/assign')\nconst isUndefined = require('lodash/isUndefined')\n\nexport interface InputFilterProps extends SearchkitComponentProps {\n  id: string\n  title: string\n  mod?: string\n  searchOnChange?: boolean\n  searchThrottleTime?: number\n  queryBuilder?: Function\n  queryFields?: Array<string>\n  queryOptions?: any\n  prefixQueryFields?: Array<string>\n  prefixQueryOptions?: any\n  placeholder?: string\n  blurAction?: 'search' | 'restore'\n  containerComponent?: RenderComponentType<any>\n}\n\nexport class InputFilter extends SearchkitComponent<InputFilterProps, any> {\n  accessor: QueryAccessor\n  lastSearchMs: number\n  throttledSearch: () => void\n\n  static translations: any = {\n    'searchbox.placeholder': 'Search',\n    'searchbox.button': 'search'\n  }\n  translations = SearchBox.translations\n\n  static defaultProps = {\n    containerComponent: Panel,\n    collapsable: false,\n    mod: 'sk-input-filter',\n    searchThrottleTime: 200,\n    blurAction: 'search'\n  }\n\n  static propTypes = defaults(\n    {\n      id: PropTypes.string.isRequired,\n      title: PropTypes.string.isRequired,\n      searchOnChange: PropTypes.bool,\n      searchThrottleTime: PropTypes.number,\n      queryBuilder: PropTypes.func,\n      queryFields: PropTypes.arrayOf(PropTypes.string),\n      queryOptions: PropTypes.object,\n      prefixQueryFields: PropTypes.arrayOf(PropTypes.string),\n      prefixQueryOptions: PropTypes.object,\n      translations: SearchkitComponent.translationsPropType(SearchBox.translations),\n      mod: PropTypes.string,\n      placeholder: PropTypes.string,\n      blurAction: PropTypes.string\n    },\n    SearchkitComponent.propTypes\n  )\n\n  constructor(props: InputFilterProps) {\n    super(props)\n    this.state = {\n      focused: false,\n      input: undefined\n    }\n    this.lastSearchMs = 0\n    this.onClear = this.onClear.bind(this)\n    this.throttledSearch = throttle(() => {\n      this.searchQuery(this.accessor.getQueryString())\n    }, props.searchThrottleTime)\n  }\n\n  componentDidMount() {\n    super.componentDidMount()\n  }\n\n  defineBEMBlocks() {\n    return { container: this.props.mod }\n  }\n\n  defineAccessor() {\n    const {\n      id,\n      title,\n      prefixQueryFields,\n      queryFields,\n      queryBuilder,\n      queryOptions,\n      prefixQueryOptions\n    } = this.props\n    return new QueryAccessor(id, {\n      title,\n      addToFilters: true,\n      queryFields: queryFields || ['_all'],\n      prefixQueryFields,\n      queryOptions: assign({}, queryOptions),\n      prefixQueryOptions: assign({}, prefixQueryOptions),\n      queryBuilder,\n      onQueryStateChange: () => {\n        if (!this.unmounted && this.state.input) {\n          this.setState({ input: undefined })\n        }\n      }\n    })\n  }\n\n  onSubmit(event) {\n    event.preventDefault()\n    this.searchQuery(this.getValue())\n  }\n\n  searchQuery(query) {\n    const shouldResetOtherState = false\n    this.accessor.setQueryString(query, shouldResetOtherState)\n    const now = +new Date()\n    const newSearch = now - this.lastSearchMs <= 2000\n    this.lastSearchMs = now\n    this.searchkit.performSearch(newSearch)\n  }\n\n  getValue() {\n    const { input } = this.state\n    if (isUndefined(input)) {\n      return this.getAccessorValue()\n    }\n    return input\n  }\n\n  getAccessorValue() {\n    return (this.accessor.state.getValue() || '') + ''\n  }\n\n  onChange(e) {\n    const query = e.target.value\n    if (this.props.searchOnChange) {\n      this.accessor.setQueryString(query)\n      this.throttledSearch()\n      this.forceUpdate()\n    } else {\n      this.setState({ input: query })\n    }\n  }\n\n  onClear() {\n    this.accessor.state = this.accessor.state.clear()\n    this.searchkit.performSearch()\n    this.setState({ input: undefined })\n  }\n\n  setFocusState(focused: boolean) {\n    if (!focused) {\n      const { input } = this.state\n      if (\n        this.props.blurAction == 'search' &&\n        !isUndefined(input) &&\n        input != this.getAccessorValue()\n      ) {\n        this.searchQuery(input)\n      }\n      this.setState({\n        focused,\n        input: undefined // Flush (should use accessor's state now)\n      })\n    } else {\n      this.setState({ focused })\n    }\n  }\n\n  render() {\n    if (!this.accessor) return null\n    const { containerComponent, title, id } = this.props\n    const block = this.bemBlocks.container\n    const value = this.getValue()\n    return renderComponent(\n      containerComponent,\n      {\n        title,\n        className: id ? `filter--${id}` : undefined,\n        disabled: this.searchkit.getHitsCount() == 0 && this.getAccessorValue() == ''\n      },\n      <div className={block().state({ focused: this.state.focused })}>\n        <form onSubmit={this.onSubmit.bind(this)}>\n          <div className={block('icon')}></div>\n          <input\n            type=\"text\"\n            data-qa=\"input-filter\"\n            className={block('text')}\n            placeholder={this.props.placeholder || this.translate('searchbox.placeholder')}\n            value={value}\n            onFocus={this.setFocusState.bind(this, true)}\n            onBlur={this.setFocusState.bind(this, false)}\n            ref=\"queryField\"\n            autoFocus={false}\n            onChange={this.onChange.bind(this)}\n          />\n          <input\n            type=\"submit\"\n            value={this.translate('searchbox.button')}\n            className={block('action')}\n            data-qa=\"submit\"\n          />\n          <div\n            data-qa=\"remove\"\n            onClick={this.onClear}\n            className={block('remove').state({ hidden: value == '' })}\n          />\n        </form>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"script"}