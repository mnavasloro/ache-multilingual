{"ast":null,"code":"import _classCallCheck from\"C:/Users/mnavas/CODE/SmartBIC/ache-multilingual/ache-dashboard/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/mnavas/CODE/SmartBIC/ache-multilingual/ache-dashboard/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/mnavas/CODE/SmartBIC/ache-multilingual/ache-dashboard/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/mnavas/CODE/SmartBIC/ache-multilingual/ache-dashboard/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{XYPlot,XAxis,YAxis,HorizontalGridLines,LineSeries,DiscreteColorLegend}from'react-vis';import{api}from'./RestApi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SeriesPlot=/*#__PURE__*/function(_React$Component){_inherits(SeriesPlot,_React$Component);var _super=_createSuper(SeriesPlot);function SeriesPlot(){var _this;_classCallCheck(this,SeriesPlot);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.plotsPerLine=2;_this.plotWidth=900/_this.plotsPerLine;_this.plotHeight=250;return _this;}_createClass(SeriesPlot,[{key:\"render\",value:function render(){var lines=[];for(var i=0;i<this.props.series.length;i++){lines.push(/*#__PURE__*/_jsx(LineSeries,{data:this.props.series[i]},i));}var divClass='col-md-'+12/this.plotsPerLine;return/*#__PURE__*/_jsxs(\"div\",{className:divClass,style:{'textAlign':'center'},children:[/*#__PURE__*/_jsxs(XYPlot,{width:this.plotWidth,height:this.plotHeight,margin:{left:80},children:[/*#__PURE__*/_jsx(HorizontalGridLines,{}),lines,/*#__PURE__*/_jsx(XAxis,{}),/*#__PURE__*/_jsx(YAxis,{})]}),/*#__PURE__*/_jsx(DiscreteColorLegend,{width:this.plotWidth,height:35*4,items:this.props.titles,orientation:\"vertical\"})]});}}]);return SeriesPlot;}(React.Component);var MetricsMonitor=/*#__PURE__*/function(_React$Component2){_inherits(MetricsMonitor,_React$Component2);var _super2=_createSuper(MetricsMonitor);function MetricsMonitor(props){var _this2;_classCallCheck(this,MetricsMonitor);_this2=_super2.call(this,props);_this2.maxDataPoints=100;_this2.updateInterval=1000;_this2.xaxisCount=0;_this2.crawlerId=_this2.props.match.params.crawler_id;_this2.state={metrics:{}};_this2.charts=[// Downloader Fetches\n[{type:\"counters\",key:\"downloader.fetches.successes\"},{type:\"counters\",key:\"downloader.fetches.aborted\"},{type:\"counters\",key:\"downloader.http_response.status.2xx\"},{type:\"counters\",key:\"downloader.fetches.errors\"}],// Downloader Queues\n[{type:\"gauges\",key:\"downloader.dispatch_queue.size\"},{type:\"gauges\",key:\"downloader.download_queue.size\"}],// Downloader Pending/Running Tasks\n[{type:\"gauges\",key:\"downloader.pending_downloads\"},{type:\"gauges\",key:\"downloader.running_handlers\"},{type:\"gauges\",key:\"downloader.running_requests\"}],// Scheduler\n[{type:\"gauges\",key:\"frontier_manager.scheduler.non_expired_domains\"},{type:\"gauges\",key:\"frontier_manager.scheduler.number_of_links\"},{type:\"gauges\",key:\"frontier_manager.scheduler.empty_domains\"}]];for(var i=0;i<_this2.charts.length;i++){for(var m=0;m<_this2.charts[i].length;m++){_this2.charts[i][m]['series']=[];}}_this2.fetchMetrics();return _this2;}_createClass(MetricsMonitor,[{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;this.timerID=setInterval(function(){return _this3.fetchMetrics();},this.updateInterval);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.timerID);}},{key:\"fetchMetrics\",value:function fetchMetrics(){api.get('/crawls/'+this.crawlerId+'/metrics').then(this.updateSeries.bind(this));}},{key:\"updateSeries\",value:function updateSeries(metrics){if(metrics==='FETCH_ERROR'){this.serverError=true;this.setState({serverError:true,serverMessage:\"Failed to connect to ACHE API to get metrics.\"});return;}for(var i=0;i<this.charts.length;i++){for(var m=0;m<this.charts[i].length;m++){var metric=this.charts[i][m];if(metric.series.length===this.maxDataPoints){metric.series.shift();}var metricValue;if(metric.type==='gauges'){metricValue=metrics[metric.type][metric.key].value;}else if(metric.type==='counters'){metricValue=metrics[metric.type][metric.key].count;}else{console.log(\"Invalid metric type: \"+metric.type);}//metricValue = metricValue * Math.random();\nmetric.series.push({x:this.xaxisCount,y:metricValue});}}this.xaxisCount+=1;this.setState({charts:this.charts,metrics:metrics});}},{key:\"render\",value:function render(){if(this.state.serverError===true){return/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger message\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"glyphicon glyphicon-exclamation-sign\",\"aria-hidden\":\"true\"}),\" \",this.state.serverMessage]});}var plots=[];var table;if(this.state.metrics!==null&&this.state.metrics.gauges!=null){var metrics=this.state.metrics;// Create metrics table\ntable=/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel panel-default\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel-heading\",children:/*#__PURE__*/_jsx(\"b\",{children:\"General\"})}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Uncrawled Links in Frontier\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['gauges']['frontier_manager.last_load.uncrawled'].value.toLocaleString()})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Successfull Requests\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['counters']['downloader.fetches.successes'].count.toLocaleString()})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Failed Requests\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['counters']['downloader.fetches.errors'].count.toLocaleString()})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Aborted Requests\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['counters']['downloader.fetches.aborted'].count.toLocaleString()})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel panel-default\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel-heading\",children:/*#__PURE__*/_jsx(\"b\",{children:\"HTTP Response\"})}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"HTTP 2XX: Success\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['counters']['downloader.http_response.status.2xx'].count.toLocaleString()})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Error HTTP 401: Unauthorized\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['counters']['downloader.http_response.status.401'].count.toLocaleString()})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Error HTTP 403: Forbidden\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['counters']['downloader.http_response.status.403'].count.toLocaleString()})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Error HTTP 404: Not Found\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['counters']['downloader.http_response.status.404'].count.toLocaleString()})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Error HTTP 5xx: Server Errors\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['counters']['downloader.http_response.status.5xx'].count.toLocaleString()})]})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel panel-default\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel-heading\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Page Relevance\"})}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Total Pages\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['counters']['target.storage.pages.downloaded'].count.toLocaleString()})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Relevant Pages\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['counters']['target.storage.pages.relevant'].count.toLocaleString()})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Irrelevant Pages\"}),/*#__PURE__*/_jsx(\"td\",{children:(metrics['counters']['target.storage.pages.downloaded'].count-metrics['counters']['target.storage.pages.relevant'].count).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Harvest Rate\"}),/*#__PURE__*/_jsx(\"td\",{children:(metrics['gauges']['target.storage.harvest.rate'].value*100).toFixed(3)+'%'})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel panel-default\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel-heading\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Page Fetcher Performance\"})}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Fetch Time (Mean)\"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['timers']['downloader.fetch.time'].mean.toFixed(2)+' ms'})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Fetch Time (Percentile 75) \"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['timers']['downloader.fetch.time'].p75.toFixed(2)+' ms'})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Fetch Time (Percentile 95) \"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['timers']['downloader.fetch.time'].p95.toFixed(2)+' ms'})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Fetch Rate: Last 15 min (pages/sec) \"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['timers']['downloader.fetch.time'].m15_rate.toFixed(2)+' pages/sec'})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Fetch Rate: Last 5 min (pages/sec) \"}),/*#__PURE__*/_jsx(\"td\",{children:metrics['timers']['downloader.fetch.time'].m5_rate.toFixed(2)+' pages/sec'})]})]})})]})]})]});// Create time series charts\nfor(var i=0;i<this.charts.length;i++){var titles=[];var series=[];for(var m=0;m<this.charts[i].length;m++){titles.push(this.charts[i][m].key);series.push(this.charts[i][m].series);}var keyName=i+'-'+m;plots.push(/*#__PURE__*/_jsx(SeriesPlot,{titles:titles,series:series},keyName));}}return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Monitoring\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Crawler ID:\"}),\" \",this.crawlerId]}),table,/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:plots})]})});}}]);return MetricsMonitor;}(React.Component);export default MetricsMonitor;","map":{"version":3,"names":["React","XYPlot","XAxis","YAxis","HorizontalGridLines","LineSeries","DiscreteColorLegend","api","SeriesPlot","plotsPerLine","plotWidth","plotHeight","lines","i","props","series","length","push","divClass","left","titles","Component","MetricsMonitor","maxDataPoints","updateInterval","xaxisCount","crawlerId","match","params","crawler_id","state","metrics","charts","type","key","m","fetchMetrics","timerID","setInterval","clearInterval","get","then","updateSeries","bind","serverError","setState","serverMessage","metric","shift","metricValue","value","count","console","log","x","y","plots","table","gauges","toLocaleString","toFixed","mean","p75","p95","m15_rate","m5_rate","keyName"],"sources":["C:/Users/mnavas/CODE/SmartBIC/ache-multilingual/ache-dashboard/src/MetricsMonitor.js"],"sourcesContent":["import React from 'react';\r\nimport {XYPlot, XAxis, YAxis, HorizontalGridLines, LineSeries, DiscreteColorLegend} from 'react-vis';\r\nimport {api} from './RestApi';\r\n\r\nclass SeriesPlot extends React.Component {\r\n\r\n  plotsPerLine = 2;\r\n  plotWidth = 900/this.plotsPerLine;\r\n  plotHeight = 250;\r\n\r\n  render() {\r\n    var lines = [];\r\n    for(var i = 0; i < this.props.series.length; i++) {\r\n      lines.push(<LineSeries key={i} data={this.props.series[i]}/>);\r\n    }\r\n    var divClass = 'col-md-'+(12/this.plotsPerLine);\r\n    return (\r\n      <div className={divClass} style={{'textAlign':'center'}}>\r\n        <XYPlot width={this.plotWidth} height={this.plotHeight} margin={{left: 80}}>\r\n          <HorizontalGridLines />\r\n          {lines}\r\n          <XAxis />\r\n          <YAxis />\r\n        </XYPlot>\r\n        <DiscreteColorLegend width={this.plotWidth} height={35*4} items={this.props.titles} orientation=\"vertical\"/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass MetricsMonitor extends React.Component {\r\n\r\n  maxDataPoints = 100;\r\n  updateInterval = 1000;\r\n  xaxisCount = 0;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.crawlerId = this.props.match.params.crawler_id;\r\n    this.state = {\r\n      metrics: {}\r\n    };\r\n    this.charts = [\r\n      // Downloader Fetches\r\n      [\r\n        {\r\n          type: \"counters\",\r\n          key: \"downloader.fetches.successes\"\r\n        },\r\n        {\r\n          type: \"counters\",\r\n          key: \"downloader.fetches.aborted\",\r\n        },\r\n        {\r\n          type: \"counters\",\r\n          key: \"downloader.http_response.status.2xx\",\r\n        },\r\n        {\r\n          type: \"counters\",\r\n          key: \"downloader.fetches.errors\",\r\n        }\r\n      ],\r\n      // Downloader Queues\r\n      [\r\n        {\r\n          type: \"gauges\",\r\n          key: \"downloader.dispatch_queue.size\"\r\n        },\r\n        {\r\n          type: \"gauges\",\r\n          key: \"downloader.download_queue.size\"\r\n        }\r\n      ],\r\n      // Downloader Pending/Running Tasks\r\n      [\r\n        {\r\n          type: \"gauges\",\r\n          key: \"downloader.pending_downloads\"\r\n        },\r\n        {\r\n          type: \"gauges\",\r\n          key: \"downloader.running_handlers\"\r\n        },\r\n        {\r\n          type: \"gauges\",\r\n          key: \"downloader.running_requests\",\r\n        }\r\n      ],\r\n      // Scheduler\r\n      [\r\n        {\r\n          type: \"gauges\",\r\n          key: \"frontier_manager.scheduler.non_expired_domains\"\r\n        },\r\n        {\r\n          type: \"gauges\",\r\n          key: \"frontier_manager.scheduler.number_of_links\"\r\n        },\r\n        {\r\n          type: \"gauges\",\r\n          key: \"frontier_manager.scheduler.empty_domains\"\r\n        }\r\n      ],\r\n\r\n    ];\r\n    for(var i = 0; i < this.charts.length; i++) {\r\n      for(var m = 0; m < this.charts[i].length; m++) {\r\n        this.charts[i][m]['series'] = [];\r\n      }\r\n    }\r\n    this.fetchMetrics();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.timerID = setInterval(\r\n      () => this.fetchMetrics(),\r\n      this.updateInterval\r\n    );\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timerID);\r\n  }\r\n\r\n  fetchMetrics() {\r\n    api.get('/crawls/' + this.crawlerId + '/metrics')\r\n       .then(this.updateSeries.bind(this));\r\n  }\r\n\r\n  updateSeries(metrics) {\r\n    if(metrics === 'FETCH_ERROR') {\r\n      this.serverError = true;\r\n      this.setState({\r\n        serverError: true,\r\n        serverMessage: \"Failed to connect to ACHE API to get metrics.\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    for(var i = 0; i < this.charts.length; i++) {\r\n      for(var m = 0; m < this.charts[i].length; m++) {\r\n        let metric = this.charts[i][m];\r\n        if(metric.series.length === this.maxDataPoints) {\r\n          metric.series.shift();\r\n        }\r\n        var metricValue;\r\n        if(metric.type === 'gauges') {\r\n          metricValue = metrics[metric.type][metric.key].value;\r\n        }\r\n        else if(metric.type === 'counters') {\r\n          metricValue = metrics[metric.type][metric.key].count;\r\n        }\r\n        else {\r\n          console.log(\"Invalid metric type: \" + metric.type);\r\n        }\r\n        //metricValue = metricValue * Math.random();\r\n        metric.series.push({x: this.xaxisCount, y: metricValue})\r\n      }\r\n    }\r\n    this.xaxisCount += 1;\r\n    this.setState({charts: this.charts, metrics: metrics});\r\n  }\r\n\r\n  render(){\r\n    if(this.state.serverError === true) {\r\n      return (\r\n        <div className=\"alert alert-danger message\">\r\n          <span className=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span> {this.state.serverMessage}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    var plots = [];\r\n    var table;\r\n    if(this.state.metrics !== null &&\r\n       this.state.metrics.gauges != null) {\r\n      var metrics = this.state.metrics;\r\n      // Create metrics table\r\n      table = (\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6\">\r\n            <div className=\"panel panel-default\">\r\n              <div className=\"panel-heading\"><b>General</b></div>\r\n              <table className=\"table table-striped\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Uncrawled Links in Frontier</td>\r\n                    <td>{metrics['gauges']['frontier_manager.last_load.uncrawled'].value.toLocaleString()}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Successfull Requests</td>\r\n                    <td>{metrics['counters']['downloader.fetches.successes'].count.toLocaleString()}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Failed Requests</td>\r\n                    <td>{metrics['counters']['downloader.fetches.errors'].count.toLocaleString()}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Aborted Requests</td>\r\n                    <td>{metrics['counters']['downloader.fetches.aborted'].count.toLocaleString()}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div className=\"panel panel-default\">\r\n              <div className=\"panel-heading\"><b>HTTP Response</b></div>\r\n              <table className=\"table table-striped\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td>HTTP 2XX: Success</td>\r\n                    <td>{metrics['counters']['downloader.http_response.status.2xx'].count.toLocaleString()}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Error HTTP 401: Unauthorized</td>\r\n                    <td>{metrics['counters']['downloader.http_response.status.401'].count.toLocaleString()}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Error HTTP 403: Forbidden</td>\r\n                    <td>{metrics['counters']['downloader.http_response.status.403'].count.toLocaleString()}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Error HTTP 404: Not Found</td>\r\n                    <td>{metrics['counters']['downloader.http_response.status.404'].count.toLocaleString()}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Error HTTP 5xx: Server Errors</td>\r\n                    <td>{metrics['counters']['downloader.http_response.status.5xx'].count.toLocaleString()}</td>\r\n                  </tr>\r\n\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-6\">\r\n            <div className=\"panel panel-default\">\r\n              <div className=\"panel-heading\"><b>Page Relevance</b></div>\r\n              <table className=\"table table-striped\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Total Pages</td>\r\n                    <td>{metrics['counters']['target.storage.pages.downloaded'].count.toLocaleString()}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Relevant Pages</td>\r\n                    <td>{metrics['counters']['target.storage.pages.relevant'].count.toLocaleString()}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Irrelevant Pages</td>\r\n                    <td>{(metrics['counters']['target.storage.pages.downloaded'].count - metrics['counters']['target.storage.pages.relevant'].count).toLocaleString()}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Harvest Rate</td>\r\n                    <td>{(metrics['gauges']['target.storage.harvest.rate'].value*100).toFixed(3)+'%'}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div className=\"panel panel-default\">\r\n              <div className=\"panel-heading\"><b>Page Fetcher Performance</b></div>\r\n              <table className=\"table table-striped\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Fetch Time (Mean)</td>\r\n                    <td>{metrics['timers']['downloader.fetch.time'].mean.toFixed(2)+' ms'}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Fetch Time (Percentile 75) </td>\r\n                    <td>{metrics['timers']['downloader.fetch.time'].p75.toFixed(2)+' ms'}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Fetch Time (Percentile 95) </td>\r\n                    <td>{metrics['timers']['downloader.fetch.time'].p95.toFixed(2)+' ms'}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Fetch Rate: Last 15 min (pages/sec) </td>\r\n                    <td>{metrics['timers']['downloader.fetch.time'].m15_rate.toFixed(2)+' pages/sec'}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Fetch Rate: Last 5 min (pages/sec) </td>\r\n                    <td>{metrics['timers']['downloader.fetch.time'].m5_rate.toFixed(2)+' pages/sec'}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n\r\n      // Create time series charts\r\n      for(var i = 0; i < this.charts.length; i++) {\r\n        var titles = [];\r\n        var series = [];\r\n        for(var m = 0; m < this.charts[i].length; m++) {\r\n          titles.push(this.charts[i][m].key);\r\n          series.push(this.charts[i][m].series);\r\n        }\r\n        var keyName = i + '-' + m;\r\n        plots.push(\r\n          (<SeriesPlot key={keyName} titles={titles} series={series} />)\r\n        );\r\n      }\r\n\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <h2>Monitoring</h2>\r\n          <h4><b>Crawler ID:</b> {this.crawlerId}</h4>\r\n          {table}\r\n          <div className=\"row\">\r\n          {plots}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default MetricsMonitor;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}